<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="purchase_request" language="i18ngroovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="797f10e7-0b3e-4c35-9d66-a649d6b4a5ef">
	<property name="ireport.zoom" value="1.4641000000000013"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<property name="TRYTON_RELATIONS" value="lines"/>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["/"]]></defaultValueExpression>
	</parameter>
	<parameter name="TAXES_DS" class="java.lang.Object"/>
	<queryString language="xPath">
		<![CDATA[]]>
	</queryString>
	<field name="id" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/id]]></fieldDescription>
	</field>
	<field name="company-logo" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/company-company/logo-logo]]></fieldDescription>
	</field>
	<field name="company-name" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/company-company/party-party/name-name]]></fieldDescription>
	</field>
	<field name="company-vat_code" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/company-company/party-party/tax_identifier-tax_identifier/code-code]]></fieldDescription>
	</field>
	<field name="company-phone" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/company-company/party-party/phone-phone]]></fieldDescription>
	</field>
	<field name="company-email" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/company-company/party-party/email-email]]></fieldDescription>
	</field>
	<field name="company-zip" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/company-company/party-party/addresses-addresses/zip-zip]]></fieldDescription>
	</field>
	<field name="company-street" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/company-company/party-party/addresses-addresses/street-street]]></fieldDescription>
	</field>
	<field name="company-city" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/company-company/party-party/addresses-addresses/city-city]]></fieldDescription>
	</field>
	<field name="company-country" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/company-company/party-party/addresses-addresses/country-country/name-name]]></fieldDescription>
	</field>
	<field name="company-header" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/company-company/header-header]]></fieldDescription>
	</field>
	<field name="company-footer" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/company-company/footer-footer]]></fieldDescription>
	</field>
	<field name="company-purchase_qty" class="java.lang.Boolean">
		<fieldDescription><![CDATA[/data/record/company-company/purchase_qty-purchase_qty]]></fieldDescription>
	</field>
	<field name="company-show_uom" class="java.lang.Boolean">
		<fieldDescription><![CDATA[/data/record/company-company/show_uom-show_uom]]></fieldDescription>
	</field>
	<field name="party-full_name" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/party-party/full_name-full_name]]></fieldDescription>
	</field>
	<field name="party-name" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/party-party/addresses-addresses/name-name]]></fieldDescription>
	</field>
	<field name="party-full_address_lang" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/invoice_address-invoice_address/full_address_lang-full_address_lang]]></fieldDescription>
	</field>
	<field name="party-street" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/party-party/addresses-addresses/street-street]]></fieldDescription>
	</field>
	<field name="party-zip" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/party-party/addresses-addresses/zip-zip]]></fieldDescription>
	</field>
	<field name="party-city" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/party-party/addresses-addresses/city-city]]></fieldDescription>
	</field>
	<field name="party-country-name" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/party-party/addresses-addresses/country-country/name-name]]></fieldDescription>
	</field>
	<field name="party-lang" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/party-party/lang-lang/code-code]]></fieldDescription>
	</field>
	<field name="payment_term-name" class="java.lang.Object">
		<fieldDescription><![CDATA[/data/record/payment_term-payment_term/name-name]]></fieldDescription>
	</field>
	<field name="payment_type-name" class="java.lang.Object">
		<fieldDescription><![CDATA[/data/record/payment_type-payment_type/name-name]]></fieldDescription>
	</field>
	<field name="payment_type-note" class="java.lang.Object">
		<fieldDescription><![CDATA[/data/record/payment_type-payment_type/note-note]]></fieldDescription>
	</field>
	<field name="number" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/number-number]]></fieldDescription>
	</field>
	<field name="reference" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/reference-reference]]></fieldDescription>
	</field>
	<field name="description" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/description-description]]></fieldDescription>
	</field>
	<field name="state-state" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/state-state]]></fieldDescription>
	</field>
	<field name="purchase_date-purchase_date" class="java.util.Date">
		<fieldDescription><![CDATA[/data/record/purchase_date-purchase_date]]></fieldDescription>
	</field>
	<field name="comment-comment" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/comment-comment]]></fieldDescription>
	</field>
	<field name="currency-code" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/currency-currency/code-code]]></fieldDescription>
	</field>
	<field name="total_amount-total_amount" class="java.lang.Number">
		<fieldDescription><![CDATA[/data/record/total_amount-total_amount]]></fieldDescription>
	</field>
	<field name="untaxed_amount-untaxed_amount" class="java.lang.Number">
		<fieldDescription><![CDATA[/data/record/untaxed_amount-untaxed_amount]]></fieldDescription>
	</field>
	<field name="tax_amount-tax_amount" class="java.lang.Number">
		<fieldDescription><![CDATA[/data/record/tax_amount-tax_amount]]></fieldDescription>
	</field>
	<field name="currency-symbol" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/currency-currency/symbol-symbol]]></fieldDescription>
	</field>
	<field name="line-quantity" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/lines-lines/quantity-quantity]]></fieldDescription>
	</field>
	<field name="line-description" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/lines-lines/description-description]]></fieldDescription>
	</field>
	<field name="line-unit_price" class="java.lang.Number">
		<fieldDescription><![CDATA[/data/record/lines-lines/unit_price-unit_price]]></fieldDescription>
	</field>
	<field name="line-amount" class="java.lang.Number">
		<fieldDescription><![CDATA[/data/record/lines-lines/amount-amount]]></fieldDescription>
	</field>
	<field name="line-note" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/lines-lines/note-note]]></fieldDescription>
	</field>
	<field name="line-symbol" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/lines-lines/unit-unit/symbol-symbol]]></fieldDescription>
	</field>
	<field name="user-name" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/create_uid-create_uid/name-name]]></fieldDescription>
	</field>
	<field name="user-email" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/create_uid-create_uid/email-email]]></fieldDescription>
	</field>
	<field name="supplier_reference-supplier_reference" class="java.lang.String">
		<fieldDescription><![CDATA[/data/record/supplier_reference-supplier_reference]]></fieldDescription>
	</field>
	<variable name="L" class="java.util.Locale">
		<variableExpression><![CDATA[$F{party-lang} != null && $F{party-lang}.length() == 5 ? new Locale($F{party-lang}) : ( $F{party-lang} != null && $F{party-lang}.length() == 2 ? new Locale($F{party-lang}) : new Locale('en_US'))]]></variableExpression>
		<initialValueExpression><![CDATA[$F{party-lang} != null && $F{party-lang}.length() == 5 ? new Locale($F{party-lang}) : ( $F{party-lang} != null && $F{party-lang}.length() == 2 ? new Locale($F{party-lang}) : new Locale('en_US'))]]></initialValueExpression>
	</variable>
	<group name="Purchase" isStartNewPage="true" isResetPageNumber="true">
		<groupExpression><![CDATA[$F{id}]]></groupExpression>
		<groupHeader>
			<band height="91">
				<textField>
					<reportElement x="75" y="75" width="148" height="12" uuid="480c2baa-c354-4696-9624-c6328ee9294c"/>
					<textElement>
						<font size="9"/>
					</textElement>
					<textFieldExpression><![CDATA[tr($V{L},"Description")]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="16" y="75" width="40" height="12" uuid="11ac5fde-4fc0-418d-bf89-a440dcf11d91"/>
					<textElement textAlignment="Right">
						<font size="9"/>
					</textElement>
					<textFieldExpression><![CDATA[tr($V{L},"Qty")]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="305" y="5" width="240" height="67" uuid="b74e97f7-ea4b-4457-bf56-b402c32293a7"/>
					<textElement markup="styled">
						<font size="9"/>
					</textElement>
					<textFieldExpression><![CDATA["<style isBold='true' pdfFontName='Helvetica'>"+$F{party-full_name}.replaceAll("&","&amp;")+"</style>\n"+$F{party-full_address_lang}.replaceAll("&","&amp;")]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="10" y="5" width="295" height="15" forecolor="#010101" uuid="38d19167-80e2-4261-bed5-9763562e5546"/>
					<textElement textAlignment="Left">
						<font size="12" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[($F{state-state}.equals("quotation") || $F{state-state}.equals("draft")) ? tr($V{L},"Purchase Request")+" "+$F{number} : tr($V{L},"Purchase Order")+" "+$F{number}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="10" y="20" width="228" height="12" uuid="26e6798f-861a-4c79-87d9-3a4c69a4afb3">
						<printWhenExpression><![CDATA[$F{purchase_date-purchase_date} != null]]></printWhenExpression>
					</reportElement>
					<textElement>
						<font size="9"/>
					</textElement>
					<textFieldExpression><![CDATA[tr($V{L},"Date")+": "+new SimpleDateFormat("dd'-'MM'-'yyyy").format($F{purchase_date-purchase_date})]]></textFieldExpression>
				</textField>
				<line>
					<reportElement x="10" y="88" width="530" height="1" uuid="94720de1-ef7d-4a5b-8911-761fdf921c0b"/>
				</line>
				<textField>
					<reportElement x="10" y="32" width="228" height="12" uuid="4a048dbc-1439-47f5-9d11-fab1fb3725b0">
						<printWhenExpression><![CDATA[$F{supplier_reference-supplier_reference} != null]]></printWhenExpression>
					</reportElement>
					<textElement>
						<font size="9"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{supplier_reference-supplier_reference} ? tr($V{L},"Supplier reference")+": "+$F{supplier_reference-supplier_reference} : '']]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement x="10" y="44" width="280" height="14" uuid="29cf2c97-5e76-4721-bdcb-0302ad057e6b"/>
					<textElement>
						<font size="9"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{reference}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement x="10" y="58" width="280" height="14" uuid="4877453d-48dc-4b0c-839f-0f0eb5b29bbb"/>
					<textElement>
						<font size="9"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{description}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="87" splitType="Prevent">
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement x="10" y="53" width="534" height="29" isRemoveLineWhenBlank="true" uuid="e47cc87a-2ba2-4334-8d89-8103abed4308"/>
					<textElement>
						<font size="9"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{comment-comment}]]></textFieldExpression>
				</textField>
				<line>
					<reportElement x="10" y="3" width="530" height="1" uuid="b7222a06-bef9-4e1d-9d7a-be5d6923c473"/>
				</line>
				<textField>
					<reportElement x="10" y="16" width="534" height="12" uuid="2ec6e329-9835-42af-bf17-bf12b2127f0b">
						<printWhenExpression><![CDATA[!$F{payment_term-name}.get($F{party-lang}, "").equalsIgnoreCase("")]]></printWhenExpression>
					</reportElement>
					<textElement>
						<font size="9" isBold="false"/>
					</textElement>
					<textFieldExpression><![CDATA[tr($V{L},"Payment Term")+": "+$F{payment_term-name}.get($F{party-lang})]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="10" y="28" width="534" height="23" uuid="98c173b1-881b-4b80-b4bb-8f95ea8abdbd">
						<printWhenExpression><![CDATA[!$F{payment_type-name}.get($F{party-lang}, "").equalsIgnoreCase("")]]></printWhenExpression>
					</reportElement>
					<textElement>
						<font size="9" isBold="false"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{payment_term-name} ? tr($V{L},"Payment Type")+": "+$F{payment_type-name}.get($F{party-lang})+"\n"+$F{payment_type-note}.get($F{party-lang}, '') : '']]></textFieldExpression>
				</textField>
			</band>
		</groupFooter>
	</group>
	<pageHeader>
		<band height="87">
			<image>
				<reportElement x="10" y="12" width="280" height="60" isRemoveLineWhenBlank="true" uuid="ab24e99e-d3dc-4dd8-919f-5b4c5115a8db">
					<printWhenExpression><![CDATA[$F{company-logo}.length()>0]]></printWhenExpression>
				</reportElement>
				<imageExpression><![CDATA[$F{company-logo}]]></imageExpression>
			</image>
			<textField isStretchWithOverflow="true">
				<reportElement x="10" y="75" width="535" height="10" isRemoveLineWhenBlank="true" forecolor="#808080" uuid="cb7505ae-feb2-424b-854a-5aa280128a4f"/>
				<textElement textAlignment="Left">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{company-header}]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<detail>
		<band height="19" splitType="Stretch">
			<textField isStretchWithOverflow="true">
				<reportElement x="76" y="2" width="462" height="12" uuid="fee4defc-7102-4a87-85a6-b9e0e5c7c74f"/>
				<textElement markup="styled">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{line-note} ? $F{line-description}+"\n<style forecolor=\"#808080\">"+$F{line-note}+"</style>" : $F{line-description}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="16" y="2" width="40" height="12" uuid="845e3c2f-289f-4749-be42-e03b42c5ab6c"/>
				<textElement textAlignment="Right">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{line-quantity} ? $F{company-purchase_qty} ? (int)Double.valueOf($F{line-quantity}.trim()).doubleValue() : Double.valueOf($F{line-quantity}.trim()).doubleValue() : '0']]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="56" y="3" width="20" height="10" uuid="0dbb4bee-ee76-4077-bb04-67ddf8287424">
					<printWhenExpression><![CDATA[$F{company-show_uom}]]></printWhenExpression>
				</reportElement>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{line-symbol}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<pageFooter>
		<band height="89" splitType="Stretch">
			<rectangle>
				<reportElement x="529" y="4" width="100" height="20" forecolor="#FEFEFE" backcolor="#A0A0A0" uuid="b61375fa-aa84-47c8-9ca2-36fbbeadf65c"/>
			</rectangle>
			<textField>
				<reportElement x="538" y="9" width="80" height="11" forecolor="#FCFCFC" uuid="cdc5364d-e44e-4e70-b891-a74315980066"/>
				<textElement textAlignment="Left">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement x="10" y="6" width="304" height="11" forecolor="#010101" uuid="d1586d85-815a-4a83-b109-15db7f5f67de"/>
				<textElement>
					<font size="9" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{company-name}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="10" y="29" width="304" height="11" forecolor="#808080" uuid="e8cfb7fc-c08e-4b03-9a48-46f9903ca9b7"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{company-zip}+" "+$F{company-city}+" "+$F{company-country}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="10" y="17" width="304" height="11" forecolor="#808080" uuid="e87189f0-5563-4d12-a6f4-0da49045bf39"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{company-street}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement x="9" y="42" width="304" height="11" forecolor="#808080" uuid="554a7b7a-5de5-4629-b221-0fc666a8a18b"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{company-vat_code}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement x="9" y="73" width="535" height="10" isRemoveLineWhenBlank="true" forecolor="#808080" uuid="e5d664fa-1a05-49ca-8267-3e7d08009c64"/>
				<textElement textAlignment="Center">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{company-footer}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="9" y="54" width="304" height="12" forecolor="#808080" uuid="6af1b7eb-141c-4d82-856c-4e2fca9ca685"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA["T. "+ $F{company-phone}+" "+$F{company-email}]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
</jasperReport>
